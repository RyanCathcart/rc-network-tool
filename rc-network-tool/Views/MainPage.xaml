<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:rc_network_tool.ViewModels"
             xmlns:models="clr-namespace:rc_network_tool.Models"
             xmlns:components="clr-namespace:rc_network_tool.Views.Components"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:dg="clr-namespace:Maui.DataGrid;assembly=Maui.DataGrid"
             x:Class="rc_network_tool.Views.MainPage"
             x:DataType="viewmodels:MainViewModel"
             Shell.NavBarIsVisible="False">

    <ScrollView>

        <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto" Padding="20,10" RowSpacing="10">

            <Border Grid.Row="0" 
                    VerticalOptions="Start"
                    BackgroundColor="{AppThemeBinding Dark={StaticResource Gray900}, Light={StaticResource White}}"
                    Shadow="0 2 4 Black 0.28">

                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12" />
                </Border.StrokeShape>

                <dg:DataGrid x:Name="NetworkAdapterDataGrid"
                             ItemsSource="{Binding NetworkAdapters}" 
                             SelectionMode="Single" 
                             SelectedItem="{Binding SelectedAdapter}"
                             ActiveRowColor="{AppThemeBinding Dark={StaticResource Gray600}, Light={StaticResource Gray100}}"
                             HeaderBackground="{AppThemeBinding Dark={StaticResource PrimaryDark}, Light={StaticResource Primary}}"
                             RowsBackgroundColorPalette="{AppThemeBinding Dark={StaticResource DgDarkPalette}, Light={StaticResource DgLightPalette}}"
                             BorderThickness="0">

                    <dg:DataGrid.Behaviors>
                        <toolkit:EventToCommandBehavior
                            EventName="ItemSelected"
                            Command="{Binding NetworkAdapterSelectedCommand}"
                            BindingContext="{Binding Source={x:Reference NetworkAdapterDataGrid}, Path=BindingContext}" />
                    </dg:DataGrid.Behaviors>

                    <dg:DataGrid.Columns>

                        <dg:DataGridColumn
                            Title="Network Connection"
                            PropertyName="Name"
                            Width="*"
                            HeaderLabelStyle="{StaticResource dgHeaderLabelStyleLeft}"
                            CellTemplate="{StaticResource dgCellTemplateLeft}" />

                        <dg:DataGridColumn 
                            Title="MAC Address"
                            PropertyName="CurrentMacAddress"
                            Width="150"
                            HeaderLabelStyle="{StaticResource dgHeaderLabelStyleLeft}"
                            CellTemplate="{StaticResource dgCellTemplateLeft}" />

                        <dg:DataGridColumn 
                            Title="Speed"
                            PropertyName="Speed"
                            Width="100"
                            HeaderLabelStyle="{StaticResource dgHeaderLabelStyleRight}"
                            CellTemplate="{StaticResource dgCellTemplateRight}" />

                        <dg:DataGridColumn 
                            Title="Status"
                            PropertyName="OperationalStatus"
                            Width="100"
                            HeaderLabelStyle="{StaticResource dgHeaderLabelStyleLeft}"
                            CellTemplate="{StaticResource dgCellTemplateLeft}" />

                    </dg:DataGrid.Columns>

                    <dg:DataGrid.NoDataView>
                        <Grid BackgroundColor="{AppThemeBinding Dark={StaticResource Gray900}, Light={StaticResource White}}">
                            <Label Text="No network adapters found" HorizontalOptions="Center" VerticalOptions="Center" />
                        </Grid>
                    </dg:DataGrid.NoDataView>

                </dg:DataGrid>

            </Border>

            <components:ConnectionDetailsView Grid.Row="1" />

            <components:ChangeMacAddressMenu Grid.Row="2" />

        </Grid>
        
    </ScrollView>

</ContentPage>
